!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.Promise=a()}}(function(){var a,b,c;return function d(a,b,c){function e(g,h){if(!b[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=b[g]={exports:{}};a[g][0].call(j.exports,function(b){var c=a[g][1][b];return e(c?c:b)},j,j.exports,d,a,b,c)}return b[g].exports}for(var f="function"==typeof require&&require,g=0;g<c.length;g++)e(c[g]);return e}({1:[function(a,b){"use strict";function c(){this._isTickUsed=!1,this._schedule=d,this._length=0,this._lateBuffer=new e(16),this._functionBuffer=new e(65536);var a=this;this.consumeFunctionBuffer=function(){a._consumeFunctionBuffer()}}var d=a("./schedule.js"),e=a("./queue.js"),f=a("./util.js").errorObj,g=a("./util.js").tryCatch1,h="undefined"!=typeof process?process:void 0;c.prototype.haveItemsQueued=function(){return this._length>0},c.prototype.invokeLater=function(a,b,c){void 0===h||null==h.domain||a.domain||(a=h.domain.bind(a)),this._lateBuffer.push(a,b,c),this._queueTick()},c.prototype.invoke=function(a,b,c){void 0===h||null==h.domain||a.domain||(a=h.domain.bind(a));var d=this._functionBuffer;d.push(a,b,c),this._length=d.length(),this._queueTick()},c.prototype._consumeFunctionBuffer=function(){for(var a=this._functionBuffer;a.length()>0;){var b=a.shift(),c=a.shift(),d=a.shift();b.call(c,d)}this._reset(),this._consumeLateBuffer()},c.prototype._consumeLateBuffer=function(){for(var a=this._lateBuffer;a.length()>0;){var b=a.shift(),c=a.shift(),d=a.shift(),e=g(b,c,d);if(e===f){if(this._queueTick(),null==b.domain)throw e.e;b.domain.emit("error",e.e)}}},c.prototype._queueTick=function(){this._isTickUsed||(this._schedule(this.consumeFunctionBuffer),this._isTickUsed=!0)},c.prototype._reset=function(){this._isTickUsed=!1,this._length=0},b.exports=new c},{"./queue.js":14,"./schedule.js":15,"./util.js":18}],2:[function(a,b){"use strict";var c=a("./promise.js")();b.exports=c},{"./promise.js":11}],3:[function(a,b){"use strict";b.exports=function(){function b(a){var b;if("function"==typeof a)b="[function "+(a.name||"anonymous")+"]";else{b=a.toString();var d=/\[object [a-zA-Z0-9$_]+\]/;if(d.test(b))try{var e=JSON.stringify(a);b=e}catch(f){}0===b.length&&(b="(empty array)")}return"(<"+c(b)+">, no stack trace)"}function c(a){var b=41;return a.length<b?a:a.substr(0,b-3)+"..."}function d(a,b){this.captureStackTrace(d,b)}var e=a("./util.js").inherits,f=a("./es5.js").defineProperty,g=new RegExp("\\b(?:[a-zA-Z0-9.]+\\$_\\w+|tryCatch(?:1|2|3|4|Apply)|new \\w*PromiseArray|\\w*PromiseArray\\.\\w*PromiseArray|setTimeout|CatchFilter\\$_\\w+|makeNodePromisified|processImmediate|process._tickCallback|nextTick|Async\\$\\w+)\\b"),h=null,i=null;e(d,Error),d.prototype.captureStackTrace=function(a,b){j(this,a,b)},d.possiblyUnhandledRejection=function(a){if("object"==typeof console){var b;if("object"==typeof a||"function"==typeof a){var c=a.stack;b="Possibly unhandled "+i(c,a)}else b="Possibly unhandled "+String(a);"function"==typeof console.error||"object"==typeof console.error?console.error(b):("function"==typeof console.log||"object"==typeof console.log)&&console.log(b)}},d.combine=function(a,b){for(var c=a.length-1,d=b.length-1;d>=0;--d){var e=b[d];if(a[c]!==e)break;a.pop(),c--}a.push("From previous event:");for(var f=a.concat(b),i=[],d=0,j=f.length;j>d;++d)g.test(f[d])||d>0&&!h.test(f[d])&&"From previous event:"!==f[d]||i.push(f[d]);return i},d.protectErrorMessageNewlines=function(a){for(var b=0;b<a.length&&!h.test(a[b]);++b);if(!(1>=b)){for(var c=[],d=0;b>d;++d)c.push(a.shift());a.unshift(c.join("\x00"))}},d.isSupported=function(){return"function"==typeof j};var j=function k(){if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){h=/^\s*at\s*/,i=function(a,c){return"string"==typeof a?a:void 0!==c.name&&void 0!==c.message?c.name+". "+c.message:b(c)};var a=Error.captureStackTrace;return function(b,c){a(b,c)}}var c=new Error;if("string"==typeof c.stack&&"function"==typeof"".startsWith&&c.stack.startsWith("stackDetection@")&&"stackDetection"===k.name){f(Error,"stackTraceLimit",{writable:!0,enumerable:!1,configurable:!1,value:25}),h=/@/;var d=/[@\n]/;return i=function(a,c){return"string"==typeof a?c.name+". "+c.message+"\n"+a:void 0!==c.name&&void 0!==c.message?c.name+". "+c.message:b(c)},function(a){for(var b=(new Error).stack,c=b.split(d),e=c.length,f="",g=0;e>g;g+=2)f+=c[g],f+="@",f+=c[g+1],f+="\n";a.stack=f}}return i=function(a,c){return"string"==typeof a?a:"object"!=typeof c&&"function"!=typeof c||void 0===c.name||void 0===c.message?b(c):c.name+". "+c.message},null}();return d}},{"./es5.js":8,"./util.js":18}],4:[function(a,b){"use strict";b.exports=function(b){function c(a,b,c){this._instances=a,this._callback=b,this._promise=c}function d(a,b){var c={},d=g(a,c,b);if(d===h)return d;var e=i(c);return e.length?(h.e=new j("Catch filter must inherit from Error or be a simple predicate function"),h):d}var e=a("./util.js"),f=a("./errors.js"),g=e.tryCatch1,h=e.errorObj,i=a("./es5.js").keys,j=f.TypeError;return c.prototype.doFilter=function(a){for(var c=this._callback,e=this._promise,i=e._boundTo,j=0,k=this._instances.length;k>j;++j){var l=this._instances[j],m=l===Error||null!=l&&l.prototype instanceof Error;if(m&&a instanceof l){var n=g(c,i,a);return n===h?(b.e=n.e,b):n}if("function"==typeof l&&!m){var o=d(l,a);if(o===h){var p=f.canAttach(h.e)?h.e:new Error(h.e+"");this._promise._attachExtraTrace(p),a=h.e;break}if(o){var n=g(c,i,a);return n===h?(b.e=n.e,b):n}}}return b.e=a,b},c}},{"./errors.js":6,"./es5.js":8,"./util.js":18}],5:[function(a,b){"use strict";var c=a("./util.js"),d=c.isPrimitive,e=c.wrapsPrimitiveReceiver;b.exports=function(a){var b=function(){return this},c=function(){throw this},f=function(a,b){return 1===b?function(){throw a}:2===b?function(){return a}:void 0};a.prototype["return"]=a.prototype.thenReturn=function(a){return e&&d(a)?this._then(f(a,2),void 0,void 0,void 0,void 0):this._then(b,void 0,void 0,a,void 0)},a.prototype["throw"]=a.prototype.thenThrow=function(a){return e&&d(a)?this._then(f(a,1),void 0,void 0,void 0,void 0):this._then(c,void 0,void 0,a,void 0)}}},{"./util.js":18}],6:[function(a,b){"use strict";function c(a){try{n(a,"isOperational",!0)}catch(b){}}function d(a){return null==a?!1:a instanceof h||a.isOperational===!0}function e(a){return a instanceof Error}function f(a){return e(a)}function g(a,b){function c(d){return this instanceof c?(this.message="string"==typeof d?d:b,this.name=a,void(Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new c(d)}return m(c,Error),c}function h(a){this.name="OperationalError",this.message=a,this.cause=a,this.isOperational=!0,a instanceof Error?(this.message=a.message,this.stack=a.stack):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}var i,j,k=a("./es5.js").freeze,l=a("./util.js"),m=l.inherits,n=l.notEnumerableProp,o=g("CancellationError","cancellation error"),p=g("TimeoutError","timeout error"),q=g("AggregateError","aggregate error");try{i=TypeError,j=RangeError}catch(r){i=g("TypeError","type error"),j=g("RangeError","range error")}for(var s="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),t=0;t<s.length;++t)"function"==typeof Array.prototype[s[t]]&&(q.prototype[s[t]]=Array.prototype[s[t]]);q.prototype.length=0,q.prototype.isOperational=!0;var u=0;q.prototype.toString=function(){var a=Array(4*u+1).join(" "),b="\n"+a+"AggregateError of:\n";u++,a=Array(4*u+1).join(" ");for(var c=0;c<this.length;++c){for(var d=this[c]===this?"[Circular AggregateError]":this[c]+"",e=d.split("\n"),f=0;f<e.length;++f)e[f]=a+e[f];d=e.join("\n"),b+=d+"\n"}return u--,b},m(h,Error);var v="__BluebirdErrorTypes__",w=Error[v];w||(w=k({CancellationError:o,TimeoutError:p,OperationalError:h,RejectionError:h,AggregateError:q}),n(Error,v,w)),b.exports={Error:Error,TypeError:i,RangeError:j,CancellationError:w.CancellationError,OperationalError:w.OperationalError,TimeoutError:w.TimeoutError,AggregateError:w.AggregateError,originatesFromRejection:d,markAsOriginatingFromRejection:c,canAttach:f}},{"./es5.js":8,"./util.js":18}],7:[function(a,b){"use strict";b.exports=function(b){function c(a){var c=new d(a),e=b.rejected(c),f=e._peekContext();return null!=f&&f._attachExtraTrace(c),e}var d=a("./errors.js").TypeError;return c}},{"./errors.js":6}],8:[function(a,b){var c=function(){"use strict";return void 0===this}();if(c)b.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,keys:Object.keys,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:c};else{var d={}.hasOwnProperty,e={}.toString,f={}.constructor.prototype,g=function(a){var b=[];for(var c in a)d.call(a,c)&&b.push(c);return b},h=function(a,b,c){return a[b]=c.value,a},i=function(a){return a},j=function(a){try{return Object(a).constructor.prototype}catch(b){return f}},k=function(a){try{return"[object Array]"===e.call(a)}catch(b){return!1}};b.exports={isArray:k,keys:g,defineProperty:h,freeze:i,getPrototypeOf:j,isES5:c}}},{}],9:[function(a,b){"use strict";b.exports=function(b,c,d){function e(){return this}function f(){throw this}function g(a){return function(){return a}}function h(a){return function(){throw a}}function i(a,b,c){var d;return d=m&&n(b)?c?g(b):h(b):c?e:f,a._then(d,o,void 0,b,void 0)}function j(a){var e=this.promise,f=this.handler,g=e._isBound()?f.call(e._boundTo):f();if(void 0!==g){var h=d(g,void 0);if(h instanceof b)return i(h,a,e.isFulfilled())}return e.isRejected()?(c.e=a,c):a}function k(a){var c=this.promise,e=this.handler,f=c._isBound()?e.call(c._boundTo,a):e(a);if(void 0!==f){var g=d(f,void 0);if(g instanceof b)return i(g,a,!0)}return a}var l=a("./util.js"),m=l.wrapsPrimitiveReceiver,n=l.isPrimitive,o=l.thrower;b.prototype._passThroughHandler=function(a,b){if("function"!=typeof a)return this.then();var c={promise:this,handler:a};return this._then(b?j:k,b?j:void 0,void 0,c,void 0)},b.prototype.lastly=b.prototype["finally"]=function(a){return this._passThroughHandler(a,!0)},b.prototype.tap=function(a){return this._passThroughHandler(a,!1)}}},{"./util.js":18}],10:[function(a,b){"use strict";b.exports=function(b,c,d,e){var f=a("./util.js"),g=f.canEvaluate,h=f.tryCatch1,i=f.errorObj;if(g){for(var j=function(a){return new Function("value","holder","                             \n            'use strict';                                                    \n            holder.pIndex = value;                                           \n            holder.checkFulfillment(this);                                   \n            ".replace(/Index/g,a))},k=function(a){for(var b=[],c=1;a>=c;++c)b.push("holder.p"+c);return new Function("holder","                                      \n            'use strict';                                                    \n            var callback = holder.fn;                                        \n            return callback(values);                                         \n            ".replace(/values/g,b.join(", ")))},l=[],m=[void 0],n=1;5>=n;++n)l.push(j(n)),m.push(k(n));var o=function(a,b){this.p1=this.p2=this.p3=this.p4=this.p5=null,this.fn=b,this.total=a,this.now=0};o.prototype.callers=m,o.prototype.checkFulfillment=function(a){var b=this.now;b++;var c=this.total;if(b>=c){var d=this.callers[c],e=h(d,void 0,this);e===i?a._rejectUnchecked(e.e):a._tryFollow(e)||a._fulfillUnchecked(e)}else this.now=b}}b.join=function(){var a,f=arguments.length-1;if(f>0&&"function"==typeof arguments[f]&&(a=arguments[f],6>f&&g)){var h=new b(e);h._setTrace(void 0);for(var i=new o(f,a),j=h._reject,k=l,m=0;f>m;++m){var n=d(arguments[m],void 0);n instanceof b?n.isPending()?n._then(k[m],j,void 0,h,i):n.isFulfilled()?k[m].call(h,n._settledValue,i):(h._reject(n._settledValue),n._unsetRejectionIsUnhandled()):k[m].call(h,n,i)}return h}for(var p=arguments.length,q=new Array(p),r=0;p>r;++r)q[r]=arguments[r];var h=new c(q).promise();return void 0!==a?h.spread(a):h}}},{"./util.js":18}],11:[function(a,b){"use strict";function c(a){try{Promise===a&&(Promise=d)}catch(b){}return a}var d;"undefined"!=typeof Promise&&(d=Promise),b.exports=function(){function b(a){if("function"!=typeof a)throw new u("the promise constructor requires a resolver function");if(this.constructor!==b)throw new u("the promise constructor cannot be invoked directly");this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._settledValue=void 0,this._boundTo=void 0,a!==g&&this._resolveFromResolver(a)}var d=a("./util.js"),e=a("./async.js"),f=a("./errors.js"),g=function(){},h={},i={e:null},j=a("./thenables.js")(b,g),k=a("./promise_array.js")(b,g,j),l=a("./captured_trace.js")(),m=a("./catch_filter.js")(i),n=a("./promise_resolver.js"),o=d.isArray,p=d.errorObj,q=d.tryCatch1,r=d.tryCatch2,s=d.tryCatchApply,t=f.RangeError,u=f.TypeError,v=f.CancellationError,w=f.TimeoutError,x=f.OperationalError,y=f.originatesFromRejection,z=f.markAsOriginatingFromRejection,A=f.canAttach,B=d.thrower,C=a("./errors_api_rejection")(b),D=function(){return new u("circular promise resolution chain")};b.prototype.bind=function(a){var c=new b(g);return c._follow(this),c._propagateFrom(this,3),c._setBoundTo(a),c},b.prototype.toString=function(){return"[object Promise]"},b.prototype.caught=b.prototype["catch"]=function(a){var b=arguments.length;if(b>1){var c,d=new Array(b-1),f=0;for(c=0;b-1>c;++c){var g=arguments[c];if("function"!=typeof g){var h=new u("A catch filter must be an error constructor or a filter function");return this._attachExtraTrace(h),void e.invoke(this._reject,this,h)}d[f++]=g}d.length=f,a=arguments[c],this._resetTrace();var i=new m(d,a,this);return this._then(void 0,i.doFilter,void 0,i,void 0)}return this._then(void 0,a,void 0,void 0,void 0)},b.prototype.then=function(a,b,c){return this._then(a,b,c,void 0,void 0)},b.prototype.done=function(a,b,c){var d=this._then(a,b,c,void 0,void 0);d._setIsFinal()},b.prototype.spread=function(a,b){return this._then(a,b,void 0,h,void 0)},b.prototype.isCancellable=function(){return!this.isResolved()&&this._cancellable()},b.prototype.toJSON=function(){var a={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(a.fulfillmentValue=this._settledValue,a.isFulfilled=!0):this.isRejected()&&(a.rejectionReason=this._settledValue,a.isRejected=!0),a},b.prototype.all=function(){return new k(this).promise()},b.is=function(a){return a instanceof b},b.all=function(a){return new k(a).promise()},b.prototype.error=function(a){return this.caught(y,a)},b.prototype._resolveFromSyncValue=function(a){if(a===p)this._cleanValues(),this._setRejected(),this._settledValue=a.e,this._ensurePossibleRejectionHandled();else{var c=j(a,void 0);c instanceof b?this._follow(c):(this._cleanValues(),this._setFulfilled(),this._settledValue=a)}},b.method=function(a){if("function"!=typeof a)throw new u("fn must be a function");return function(){var c;switch(arguments.length){case 0:c=q(a,this,void 0);break;case 1:c=q(a,this,arguments[0]);break;case 2:c=r(a,this,arguments[0],arguments[1]);break;default:for(var d=arguments.length,e=new Array(d),f=0;d>f;++f)e[f]=arguments[f];c=s(a,e,this)}var h=new b(g);return h._setTrace(void 0),h._resolveFromSyncValue(c),h}},b.attempt=b["try"]=function(a,c,d){if("function"!=typeof a)return C("fn must be a function");var e=o(c)?s(a,c,d):q(a,d,c),f=new b(g);return f._setTrace(void 0),f._resolveFromSyncValue(e),f},b.defer=b.pending=function(){var a=new b(g);return a._setTrace(void 0),new n(a)},b.bind=function(a){var c=new b(g);return c._setTrace(void 0),c._setFulfilled(),c._setBoundTo(a),c},b.cast=function(a){var c=j(a,void 0);if(!(c instanceof b)){var d=c;c=new b(g),c._setTrace(void 0),c._setFulfilled(),c._cleanValues(),c._settledValue=d}return c},b.resolve=b.fulfilled=b.cast,b.reject=b.rejected=function(a){var c=new b(g);if(c._setTrace(void 0),z(a),c._cleanValues(),c._setRejected(),c._settledValue=a,!A(a)){var d=new Error(a+"");c._setCarriedStackTrace(d)}return c._ensurePossibleRejectionHandled(),c},b.onPossiblyUnhandledRejection=function(a){l.possiblyUnhandledRejection="function"==typeof a?a:void 0};var E;b.onUnhandledRejectionHandled=function(a){E="function"==typeof a?a:void 0};var F=!1||!("undefined"==typeof process||"string"!=typeof process.execPath||"object"!=typeof process.env||!process.env.BLUEBIRD_DEBUG&&"development"!==process.env.NODE_ENV);b.longStackTraces=function(){if(e.haveItemsQueued()&&F===!1)throw new Error("cannot enable long stack traces after promises have been created");F=l.isSupported()},b.hasLongStackTraces=function(){return F&&l.isSupported()},b.prototype._then=function(a,c,d,f,h){var i=void 0!==h,j=i?h:new b(g);if(!i){if(F){var k=this._peekContext()===this._traceParent;j._traceParent=k?this._traceParent:this}j._propagateFrom(this,7)}var l=this._addCallbacks(a,c,d,j,f);return this.isResolved()&&e.invoke(this._queueSettleAt,this,l),j},b.prototype._length=function(){return 262143&this._bitField},b.prototype._isFollowingOrFulfilledOrRejected=function(){return(939524096&this._bitField)>0},b.prototype._isFollowing=function(){return 536870912===(536870912&this._bitField)},b.prototype._setLength=function(a){this._bitField=-262144&this._bitField|262143&a},b.prototype._setFulfilled=function(){this._bitField=268435456|this._bitField},b.prototype._setRejected=function(){this._bitField=134217728|this._bitField},b.prototype._setFollowing=function(){this._bitField=536870912|this._bitField},b.prototype._setIsFinal=function(){this._bitField=33554432|this._bitField},b.prototype._isFinal=function(){return(33554432&this._bitField)>0},b.prototype._cancellable=function(){return(67108864&this._bitField)>0},b.prototype._setCancellable=function(){this._bitField=67108864|this._bitField},b.prototype._unsetCancellable=function(){this._bitField=-67108865&this._bitField},b.prototype._setRejectionIsUnhandled=function(){this._bitField=2097152|this._bitField},b.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-2097153&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},b.prototype._isRejectionUnhandled=function(){return(2097152&this._bitField)>0},b.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=524288|this._bitField},b.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-524289&this._bitField},b.prototype._isUnhandledRejectionNotified=function(){return(524288&this._bitField)>0},b.prototype._setCarriedStackTrace=function(a){this._bitField=1048576|this._bitField,this._fulfillmentHandler0=a},b.prototype._unsetCarriedStackTrace=function(){this._bitField=-1048577&this._bitField,this._fulfillmentHandler0=void 0},b.prototype._isCarryingStackTrace=function(){return(1048576&this._bitField)>0},b.prototype._getCarriedStackTrace=function(){return this._isCarryingStackTrace()?this._fulfillmentHandler0:void 0},b.prototype._receiverAt=function(a){var b=0===a?this._receiver0:this[(a<<2)+a-5+4];return this._isBound()&&void 0===b?this._boundTo:b},b.prototype._promiseAt=function(a){return 0===a?this._promise0:this[(a<<2)+a-5+3]},b.prototype._fulfillmentHandlerAt=function(a){return 0===a?this._fulfillmentHandler0:this[(a<<2)+a-5+0]},b.prototype._rejectionHandlerAt=function(a){return 0===a?this._rejectionHandler0:this[(a<<2)+a-5+1]},b.prototype._addCallbacks=function(a,b,c,d,e){var f=this._length();if(f>=262138&&(f=0,this._setLength(0)),0===f)this._promise0=d,void 0!==e&&(this._receiver0=e),"function"!=typeof a||this._isCarryingStackTrace()||(this._fulfillmentHandler0=a),"function"==typeof b&&(this._rejectionHandler0=b),"function"==typeof c&&(this._progressHandler0=c);else{var g=(f<<2)+f-5;this[g+3]=d,this[g+4]=e,this[g+0]="function"==typeof a?a:void 0,this[g+1]="function"==typeof b?b:void 0,this[g+2]="function"==typeof c?c:void 0}return this._setLength(f+1),f},b.prototype._setProxyHandlers=function(a,b){var c=this._length();if(c>=262138&&(c=0,this._setLength(0)),0===c)this._promise0=b,this._receiver0=a;else{var d=(c<<2)+c-5;this[d+3]=b,this[d+4]=a,this[d+0]=this[d+1]=this[d+2]=void 0}this._setLength(c+1)},b.prototype._proxyPromiseArray=function(a,b){this._setProxyHandlers(a,b)},b.prototype._proxyPromise=function(a){a._setProxied(),this._setProxyHandlers(a,-1)},b.prototype._setBoundTo=function(a){void 0!==a?(this._bitField=8388608|this._bitField,this._boundTo=a):this._bitField=-8388609&this._bitField},b.prototype._isBound=function(){return 8388608===(8388608&this._bitField)},b.prototype._resolveFromResolver=function(a){function b(a){d._tryFollow(a)||d._fulfill(a)}function c(a){var b=A(a)?a:new Error(a+"");d._attachExtraTrace(b),z(a),d._reject(a,b===a?void 0:b)}var d=this;this._setTrace(void 0),this._pushContext();var e=r(a,void 0,b,c);if(this._popContext(),void 0!==e&&e===p){var f=e.e,g=A(f)?f:new Error(f+"");d._reject(f,g)}},b.prototype._spreadSlowCase=function(a,b,c,d){var e=new k(c).promise(),f=e._then(function(){return a.apply(d,arguments)},void 0,void 0,h,void 0);b._follow(f)},b.prototype._callSpread=function(a,c,d){var e=this._boundTo;if(o(d))for(var f=0,g=d.length;g>f;++f)if(j(d[f],void 0)instanceof b)return void this._spreadSlowCase(a,c,d,e);return c._pushContext(),s(a,d,e)},b.prototype._callHandler=function(a,b,c,d){var e;return b!==h||this.isRejected()?(c._pushContext(),e=q(a,b,d)):e=this._callSpread(a,c,d),c._popContext(),e},b.prototype._settlePromiseFromHandler=function(a,c,d,e){if(!(e instanceof b))return void a.call(c,d,e);var f=this._callHandler(a,c,e,d);if(!e._isFollowing())if(f===p||f===e||f===i){var g=f===e?D():f.e,h=A(g)?g:new Error(g+"");f!==i&&e._attachExtraTrace(h),e._rejectUnchecked(g,h)}else{var k=j(f,e);if(k instanceof b){if(k.isRejected()&&!k._isCarryingStackTrace()&&!A(k._settledValue)){var h=new Error(k._settledValue+"");e._attachExtraTrace(h),k._setCarriedStackTrace(h)}e._follow(k),e._propagateFrom(k,1)}else e._fulfillUnchecked(f)}},b.prototype._follow=function(a){this._setFollowing(),a.isPending()?(this._propagateFrom(a,1),a._proxyPromise(this)):a.isFulfilled()?this._fulfillUnchecked(a._settledValue):this._rejectUnchecked(a._settledValue,a._getCarriedStackTrace()),a._isRejectionUnhandled()&&a._unsetRejectionIsUnhandled(),F&&null==a._traceParent&&(a._traceParent=this)},b.prototype._tryFollow=function(a){if(this._isFollowingOrFulfilledOrRejected()||a===this)return!1;var c=j(a,void 0);return c instanceof b?(this._follow(c),!0):!1},b.prototype._resetTrace=function(){F&&(this._trace=new l(void 0===this._peekContext()))},b.prototype._setTrace=function(a){if(F){var b=this._peekContext();this._traceParent=b;var c=void 0===b;this._trace=void 0!==a&&a._traceParent===b?a._trace:new l(c)}return this},b.prototype._attachExtraTrace=function(a){if(F){var b=this,c=a.stack;c="string"==typeof c?c.split("\n"):[],l.protectErrorMessageNewlines(c);for(var d=1,e=1;null!=b&&null!=b._trace;)c=l.combine(c,b._trace.stack.split("\n")),b=b._traceParent,e++;var f=Error.stackTraceLimit||10,g=(f+d)*e,h=c.length;h>g&&(c.length=g),h>0&&(c[0]=c[0].split("\x00").join("\n")),a.stack=c.length<=d?"(No stack trace)":c.join("\n")}},b.prototype._cleanValues=function(){this._cancellable()&&(this._cancellationParent=void 0)},b.prototype._propagateFrom=function(a,b){(1&b)>0&&a._cancellable()&&(this._setCancellable(),this._cancellationParent=a),(4&b)>0&&this._setBoundTo(a._boundTo),(2&b)>0&&this._setTrace(a)},b.prototype._fulfill=function(a){this._isFollowingOrFulfilledOrRejected()||this._fulfillUnchecked(a)},b.prototype._reject=function(a,b){this._isFollowingOrFulfilledOrRejected()||this._rejectUnchecked(a,b)},b.prototype._settlePromiseAt=function(a){var c=this.isFulfilled()?this._fulfillmentHandlerAt(a):this._rejectionHandlerAt(a),d=this._settledValue,e=this._receiverAt(a),f=this._promiseAt(a);if("function"==typeof c)this._settlePromiseFromHandler(c,e,d,f);else{var g=!1,h=this.isFulfilled();void 0!==e&&(e instanceof b&&e._isProxied()?(e._unsetProxied(),h?e._fulfillUnchecked(d):e._rejectUnchecked(d,this._getCarriedStackTrace()),g=!0):e instanceof k&&(h?e._promiseFulfilled(d,f):e._promiseRejected(d,f),g=!0)),g||(h?f._fulfill(d):f._reject(d,this._getCarriedStackTrace()))}a>=256&&this._queueGC()},b.prototype._isProxied=function(){return 4194304===(4194304&this._bitField)},b.prototype._setProxied=function(){this._bitField=4194304|this._bitField},b.prototype._unsetProxied=function(){this._bitField=-4194305&this._bitField},b.prototype._isGcQueued=function(){return-1073741824===(-1073741824&this._bitField)},b.prototype._setGcQueued=function(){this._bitField=-1073741824|this._bitField},b.prototype._unsetGcQueued=function(){this._bitField=1073741823&this._bitField},b.prototype._queueGC=function(){this._isGcQueued()||(this._setGcQueued(),e.invokeLater(this._gc,this,void 0))},b.prototype._gc=function(){for(var a=5*this._length(),b=0;a>b;b++)delete this[b];this._setLength(0),this._unsetGcQueued()},b.prototype._queueSettleAt=function(a){this._isRejectionUnhandled()&&this._unsetRejectionIsUnhandled(),e.invoke(this._settlePromiseAt,this,a)},b.prototype._fulfillUnchecked=function(a){if(this.isPending()){if(a===this){var b=D();return this._attachExtraTrace(b),this._rejectUnchecked(b,void 0)}this._cleanValues(),this._setFulfilled(),this._settledValue=a;var c=this._length();c>0&&e.invoke(this._settlePromises,this,c)}},b.prototype._rejectUncheckedCheckError=function(a){var b=A(a)?a:new Error(a+"");this._rejectUnchecked(a,b===a?void 0:b)},b.prototype._rejectUnchecked=function(a,b){if(this.isPending()){if(a===this){var c=D();return this._attachExtraTrace(c),this._rejectUnchecked(c)}if(this._cleanValues(),this._setRejected(),this._settledValue=a,this._isFinal())return void e.invokeLater(B,void 0,void 0===b?a:b);var d=this._length();void 0!==b&&this._setCarriedStackTrace(b),d>0?e.invoke(this._rejectPromises,this,null):this._ensurePossibleRejectionHandled()}},b.prototype._rejectPromises=function(){this._settlePromises(),this._unsetCarriedStackTrace()},b.prototype._settlePromises=function(){for(var a=this._length(),b=0;a>b;b++)this._settlePromiseAt(b)},b.prototype._ensurePossibleRejectionHandled=function(){this._setRejectionIsUnhandled(),void 0!==l.possiblyUnhandledRejection&&e.invokeLater(this._notifyUnhandledRejection,this,void 0)},b.prototype._notifyUnhandledRejectionIsHandled=function(){"function"==typeof E&&e.invokeLater(E,void 0,this)},b.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var a=this._settledValue,b=this._getCarriedStackTrace();this._setUnhandledRejectionIsNotified(),void 0!==b&&(this._unsetCarriedStackTrace(),a=b),"function"==typeof l.possiblyUnhandledRejection&&l.possiblyUnhandledRejection(a,this)}};var G=[];return b.prototype._peekContext=function(){var a=G.length-1;return a>=0?G[a]:void 0},b.prototype._pushContext=function(){F&&G.push(this)},b.prototype._popContext=function(){F&&G.pop()},b.noConflict=function(){return c(b)},b.setScheduler=function(a){if("function"!=typeof a)throw new u("fn must be a function");e._schedule=a},l.isSupported()||(b.longStackTraces=function(){},F=!1),b._makeSelfResolutionError=D,a("./finally.js")(b,i,j),a("./direct_resolve.js")(b),a("./synchronous_inspection.js")(b),a("./join.js")(b,k,j,g),b.RangeError=t,b.CancellationError=v,b.TimeoutError=w,b.TypeError=u,b.OperationalError=x,b.RejectionError=x,b.AggregateError=f.AggregateError,d.toFastProperties(b),d.toFastProperties(b.prototype),b.Promise=b,b.prototype=b.prototype,b}},{"./async.js":1,"./captured_trace.js":3,"./catch_filter.js":4,"./direct_resolve.js":5,"./errors.js":6,"./errors_api_rejection":7,"./finally.js":9,"./join.js":10,"./promise_array.js":12,"./promise_resolver.js":13,"./synchronous_inspection.js":16,"./thenables.js":17,"./util.js":18}],12:[function(a,b){"use strict";b.exports=function(b,c,d){function e(a){switch(a){case-1:return void 0;case-2:return[];case-3:return{}}}function f(a){var d=this._promise=new b(c),e=void 0;a instanceof b&&(e=a,d._propagateFrom(e,5)),d._setTrace(e),this._values=a,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var g=a("./errors.js").canAttach,h=a("./util.js"),i=h.isArray;return f.prototype.length=function(){return this._length},f.prototype.promise=function(){return this._promise},f.prototype._init=function j(a,c){var f=d(this._values,void 0);if(f instanceof b){if(this._values=f,f._setBoundTo(this._promise._boundTo),!f.isFulfilled())return f.isPending()?void f._then(j,this._reject,void 0,this,c):(f._unsetRejectionIsUnhandled(),void this._reject(f._settledValue));if(f=f._settledValue,!i(f)){var g=new b.TypeError("expecting an array, a promise or a thenable");return void this.__hardReject__(g)}}else if(!i(f)){var g=new b.TypeError("expecting an array, a promise or a thenable");return void this.__hardReject__(g)}if(0===f.length)return void(-5===c?this._resolveEmptyArray():this._resolve(e(c)));for(var h=this.getActualLength(f.length),k=h,l=this.shouldCopyValues()?new Array(h):this._values,m=!1,n=0;h>n;++n){var o=d(f[n],void 0);o instanceof b?o.isPending()?o._proxyPromiseArray(this,n):(o._unsetRejectionIsUnhandled(),m=!0):m=!0,l[n]=o}this._values=l,this._length=k,m&&this._scanDirectValues(h)},f.prototype._settlePromiseAt=function(a){var c=this._values[a];c instanceof b?c.isFulfilled()?this._promiseFulfilled(c._settledValue,a):c.isRejected()&&this._promiseRejected(c._settledValue,a):this._promiseFulfilled(c,a)},f.prototype._scanDirectValues=function(a){for(var b=0;a>b&&!this._isResolved();++b)this._settlePromiseAt(b)},f.prototype._isResolved=function(){return null===this._values},f.prototype._resolve=function(a){this._values=null,this._promise._fulfill(a)},f.prototype.__hardReject__=f.prototype._reject=function(a){this._values=null;var b=g(a)?a:new Error(a+"");this._promise._attachExtraTrace(b),this._promise._reject(a,b)},f.prototype._promiseProgressed=function(a,b){this._isResolved()||this._promise._progress({index:b,value:a})},f.prototype._promiseFulfilled=function(a,b){if(!this._isResolved()){this._values[b]=a;var c=++this._totalResolved;c>=this._length&&this._resolve(this._values)}},f.prototype._promiseRejected=function(a){this._isResolved()||(this._totalResolved++,this._reject(a))},f.prototype.shouldCopyValues=function(){return!0},f.prototype.getActualLength=function(a){return a},f}},{"./errors.js":6,"./util.js":18}],13:[function(a,b){"use strict";function c(a){return a instanceof Error&&n.getPrototypeOf(a)===Error.prototype}function d(a){var b;return b=c(a)?new k(a):a,i.markAsOriginatingFromRejection(b),b}function e(a){function b(b,c){if(null!==a){if(b){var e=d(h(b));a._attachExtraTrace(e),a._reject(e)}else if(arguments.length>2){for(var f=arguments.length,g=new Array(f-1),i=1;f>i;++i)g[i-1]=arguments[i];a._fulfill(g)}else a._fulfill(c);a=null}}return b}var f,g=a("./util.js"),h=g.maybeWrapAsError,i=a("./errors.js"),j=i.TimeoutError,k=i.OperationalError,l=a("./async.js"),m=g.haveGetters,n=a("./es5.js");if(f=m?function(a){this.promise=a}:function(a){this.promise=a,this.asCallback=e(a),this.callback=this.asCallback},m){var o={get:function(){return e(this.promise)}};n.defineProperty(f.prototype,"asCallback",o),n.defineProperty(f.prototype,"callback",o)}f._nodebackForPromise=e,f.prototype.toString=function(){return"[object PromiseResolver]"},f.prototype.resolve=f.prototype.fulfill=function(a){if(!(this instanceof f))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.");var b=this.promise;b._tryFollow(a)||l.invoke(b._fulfill,b,a)},f.prototype.reject=function(a){if(!(this instanceof f))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.");
var b=this.promise;i.markAsOriginatingFromRejection(a);var c=i.canAttach(a)?a:new Error(a+"");b._attachExtraTrace(c),l.invoke(b._reject,b,a),c!==a&&l.invoke(this._setCarriedStackTrace,this,c)},f.prototype.progress=function(a){if(!(this instanceof f))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.");l.invoke(this.promise._progress,this.promise,a)},f.prototype.cancel=function(){l.invoke(this.promise.cancel,this.promise,void 0)},f.prototype.timeout=function(){this.reject(new j("timeout"))},f.prototype.isResolved=function(){return this.promise.isResolved()},f.prototype.toJSON=function(){return this.promise.toJSON()},f.prototype._setCarriedStackTrace=function(a){this.promise.isRejected()&&this.promise._setCarriedStackTrace(a)},b.exports=f},{"./async.js":1,"./errors.js":6,"./es5.js":8,"./util.js":18}],14:[function(a,b){"use strict";function c(a,b,c,d,e){for(var f=0;e>f;++f)c[f+d]=a[f+b]}function d(a){this._capacity=a,this._length=0,this._front=0,this._makeCapacity()}d.prototype._willBeOverCapacity=function(a){return this._capacity<a},d.prototype._pushOne=function(a){var b=this.length();this._checkCapacity(b+1);var c=this._front+b&this._capacity-1;this[c]=a,this._length=b+1},d.prototype.push=function(a,b,c){var d=this.length()+3;if(this._willBeOverCapacity(d))return this._pushOne(a),this._pushOne(b),void this._pushOne(c);var e=this._front+d-3;this._checkCapacity(d);var f=this._capacity-1;this[e+0&f]=a,this[e+1&f]=b,this[e+2&f]=c,this._length=d},d.prototype.shift=function(){var a=this._front,b=this[a];return this[a]=void 0,this._front=a+1&this._capacity-1,this._length--,b},d.prototype.length=function(){return this._length},d.prototype._makeCapacity=function(){for(var a=this._capacity,b=0;a>b;++b)this[b]=void 0},d.prototype._checkCapacity=function(a){this._capacity<a&&this._resizeTo(this._capacity<<3)},d.prototype._resizeTo=function(a){var b=this._front,d=this._capacity,e=new Array(d),f=this.length();if(c(this,0,e,0,d),this._capacity=a,this._makeCapacity(),this._front=0,d>=b+f)c(e,b,this,0,f);else{var g=f-(b+f&d-1);c(e,b,this,0,g),c(e,0,this,g,f-g)}},b.exports=d},{}],15:[function(a,b){"use strict";var c,d;if("object"==typeof process&&"string"==typeof process.version)c=function(a){process.nextTick(a)};else if("undefined"!=typeof MutationObserver&&(d=MutationObserver)||"undefined"!=typeof WebKitMutationObserver&&(d=WebKitMutationObserver))c=function(){var a=document.createElement("div"),b=void 0,c=new d(function(){var a=b;b=void 0,a()});return c.observe(a,{attributes:!0}),function(c){b=c,a.setAttribute("class","foo")}}();else{if("undefined"==typeof setTimeout)throw new Error("no async scheduler available");c=function(a){setTimeout(a,0)}}b.exports=c},{}],16:[function(a,b){"use strict";b.exports=function(a){function b(a){void 0!==a?(this._bitField=a._bitField,this._settledValue=a.isResolved()?a._settledValue:void 0):(this._bitField=0,this._settledValue=void 0)}b.prototype.isFulfilled=a.prototype.isFulfilled=function(){return(268435456&this._bitField)>0},b.prototype.isRejected=a.prototype.isRejected=function(){return(134217728&this._bitField)>0},b.prototype.isPending=a.prototype.isPending=function(){return 0===(402653184&this._bitField)},b.prototype.value=a.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise");return this._settledValue},b.prototype.error=b.prototype.reason=a.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise");return this._settledValue},b.prototype.isResolved=a.prototype.isResolved=function(){return(402653184&this._bitField)>0},a.PromiseInspection=b}},{}],17:[function(a,b){"use strict";b.exports=function(b,c){function d(a){try{return a.then}catch(b){return j.e=b,j}}function e(a,e){if(k(a)){if(a instanceof b)return a;if(f(a)){var h=new b(c);return h._setTrace(void 0),a._then(h._fulfillUnchecked,h._rejectUncheckedCheckError,h._progressUnchecked,h,null),h._setFollowing(),h}var l=d(a);if(l===j)return void 0!==e&&i(l.e)&&e._attachExtraTrace(l.e),b.reject(l.e);if("function"==typeof l)return g(a,l,e)}return a}function f(a){return l.call(a,"_promise0")}function g(a,c,d){function e(c){if(!j){if(j=!0,a===c){var e=b._makeSelfResolutionError();return void 0!==d&&d._attachExtraTrace(e),void h.promise._reject(e,void 0)}h.resolve(c)}}function f(a){if(!j){j=!0;var b=i(a)?a:new Error(a+"");void 0!==d&&d._attachExtraTrace(b),h.promise._reject(a,b)}}function g(a){if(!j){var b=h.promise;"function"==typeof b._progress&&b._progress(a)}}var h=b.defer(),j=!1;try{c.call(a,e,f,g)}catch(k){if(!j){j=!0;var l=i(k)?k:new Error(k+"");void 0!==d&&d._attachExtraTrace(l),h.promise._reject(k,l)}}return h.promise}var h=a("./util.js"),i=a("./errors.js").canAttach,j=h.errorObj,k=h.isObject,l={}.hasOwnProperty;return e}},{"./errors.js":6,"./util.js":18}],18:[function(a,b,c){"use strict";function d(a,b,c){try{return a.call(b,c)}catch(d){return x.e=d,x}}function e(a,b,c,d){try{return a.call(b,c,d)}catch(e){return x.e=e,x}}function f(a,b,c,d,e){try{return a.call(b,c,d,e)}catch(f){return x.e=f,x}}function g(a,b,c,d,e,f){try{return a.call(b,c,d,e,f)}catch(g){return x.e=g,x}}function h(a,b,c){try{return a.apply(c,b)}catch(d){return x.e=d,x}}function i(a){return"string"==typeof a?a:""+a}function j(a){return null==a||a===!0||a===!1||"string"==typeof a||"number"==typeof a}function k(a){return!j(a)}function l(a){return j(a)?new Error(i(a)):a}function m(a,b){var c,d=a.length,e=new Array(d+1);for(c=0;d>c;++c)e[c]=a[c];return e[c]=b,e}function n(a,b,c){if(!u.isES5)return{}.hasOwnProperty.call(a,b)?a[b]:void 0;var d=Object.getOwnPropertyDescriptor(a,b);return null!=d?null==d.get&&null==d.set?d.value:c:void 0}function o(a,b,c){if(j(a))return a;var d={value:c,configurable:!0,enumerable:!1,writable:!0};return u.defineProperty(a,b,d),a}function p(a){throw a}function q(a){try{if("function"==typeof a){var b=u.keys(a.prototype);return b.length>0&&!(1===b.length&&"constructor"===b[0])}return!1}catch(c){return!1}}function r(a){function b(){}return b.prototype=a,b}function s(a){return B.test(a)}function t(a,b,c){for(var d=new Array(a),e=0;a>e;++e)d[e]=b+e+c;return d}var u=a("./es5.js"),v=function(){try{var a={};return u.defineProperty(a,"f",{get:function(){return 3}}),3===a.f}catch(b){return!1}}(),w="undefined"==typeof navigator,x={e:{}},y=function(a,b){function c(){this.constructor=a,this.constructor$=b;for(var c in b.prototype)d.call(b.prototype,c)&&"$"!==c.charAt(c.length-1)&&(this[c+"$"]=b.prototype[c])}var d={}.hasOwnProperty;return c.prototype=b.prototype,a.prototype=new c,a.prototype},z=function(){return"string"!==this}.call("string"),A=function(){return u.isES5?function(a,b){for(var c=[],d=Object.create(null),e=Object(b).includeHidden?Object.getOwnPropertyNames:Object.keys;null!=a;){var f;try{f=e(a)}catch(g){return c}for(var h=0;h<f.length;++h){var i=f[h];if(!d[i]){d[i]=!0;var j=Object.getOwnPropertyDescriptor(a,i);null!=j&&null==j.get&&null==j.set&&c.push(i)}}a=u.getPrototypeOf(a)}return c}:function(a){var b=[];for(var c in a)b.push(c);return b}}(),B=/^[a-z$_][a-z$_0-9]*$/i,C={isClass:q,isIdentifier:s,inheritedDataKeys:A,getDataPropertyOrDefault:n,thrower:p,isArray:u.isArray,haveGetters:v,notEnumerableProp:o,isPrimitive:j,isObject:k,canEvaluate:w,errorObj:x,tryCatch1:d,tryCatch2:e,tryCatch3:f,tryCatch4:g,tryCatchApply:h,inherits:y,withAppended:m,asString:i,maybeWrapAsError:l,wrapsPrimitiveReceiver:z,toFastProperties:r,filledRange:t};b.exports=C},{"./es5.js":8}]},{},[2])(2)}),!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.EVEoj=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){b.exports=a("./lib/extend")},{"./lib/extend":2}],2:[function(a,b){function c(){var a,b,e,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;for("boolean"==typeof i&&(l=i,i=arguments[1]||{},j=2),"object"==typeof i||d.fn(i)||(i={});k>j;j++)if(a=arguments[j],null!=a){"string"==typeof a&&(a=a.split(""));for(b in a)e=i[b],f=a[b],i!==f&&(l&&f&&(d.hash(f)||(g=d.array(f)))?(g?(g=!1,h=e&&d.array(e)?e:[]):h=e&&d.hash(e)?e:{},i[b]=c(l,h,f)):"undefined"!=typeof f&&(i[b]=f))}return i}var d=a("is");c.version="1.0.8",b.exports=c},{is:3}],3:[function(a,b){var c=Object.prototype,d=c.hasOwnProperty,e=c.toString,f=function(a){return a!==a},g={"boolean":1,number:1,string:1,undefined:1},h=b.exports={};h.a=h.type=function(a,b){return typeof a===b},h.defined=function(a){return void 0!==a},h.empty=function(a){var b,c=e.call(a);if("[object Array]"===c||"[object Arguments]"===c)return 0===a.length;if("[object Object]"===c){for(b in a)if(d.call(a,b))return!1;return!0}return"[object String]"===c?""===a:!1},h.equal=function(a,b){var c=a===b;if(c)return!0;var d,f=e.call(a);if(f!==e.call(b))return!1;if("[object Object]"===f){for(d in a)if(!(h.equal(a[d],b[d])&&d in b))return!1;for(d in b)if(!(h.equal(a[d],b[d])&&d in a))return!1;return!0}if("[object Array]"===f){if(d=a.length,d!==b.length)return!1;for(;--d;)if(!h.equal(a[d],b[d]))return!1;return!0}return"[object Function]"===f?a.prototype===b.prototype:"[object Date]"===f?a.getTime()===b.getTime():c},h.hosted=function(a,b){var c=typeof b[a];return"object"===c?!!b[a]:!g[c]},h.instance=h["instanceof"]=function(a,b){return a instanceof b},h["null"]=function(a){return null===a},h.undef=h.undefined=function(a){return void 0===a},h.args=h.arguments=function(a){var b="[object Arguments]"===e.call(a),c=!h.array(a)&&h.arraylike(a)&&h.object(a)&&h.fn(a.callee);return b||c},h.array=function(a){return"[object Array]"===e.call(a)},h.args.empty=function(a){return h.args(a)&&0===a.length},h.array.empty=function(a){return h.array(a)&&0===a.length},h.arraylike=function(a){return!!a&&!h.boolean(a)&&d.call(a,"length")&&isFinite(a.length)&&h.number(a.length)&&a.length>=0},h.boolean=function(a){return"[object Boolean]"===e.call(a)},h["false"]=function(a){return h.boolean(a)&&(a===!1||a.valueOf()===!1)},h["true"]=function(a){return h.boolean(a)&&(a===!0||a.valueOf()===!0)},h.date=function(a){return"[object Date]"===e.call(a)},h.element=function(a){return void 0!==a&&"undefined"!=typeof HTMLElement&&a instanceof HTMLElement&&1===a.nodeType},h.error=function(a){return"[object Error]"===e.call(a)},h.fn=h["function"]=function(a){var b="undefined"!=typeof window&&a===window.alert;return b||"[object Function]"===e.call(a)},h.number=function(a){return"[object Number]"===e.call(a)},h.infinite=function(a){return 1/0===a||a===-1/0},h.decimal=function(a){return h.number(a)&&!f(a)&&!h.infinite(a)&&a%1!==0},h.divisibleBy=function(a,b){var c=h.infinite(a),d=h.infinite(b),e=h.number(a)&&!f(a)&&h.number(b)&&!f(b)&&0!==b;return c||d||e&&a%b===0},h.int=function(a){return h.number(a)&&!f(a)&&a%1===0},h.maximum=function(a,b){if(f(a))throw new TypeError("NaN is not a valid value");if(!h.arraylike(b))throw new TypeError("second argument must be array-like");for(var c=b.length;--c>=0;)if(a<b[c])return!1;return!0},h.minimum=function(a,b){if(f(a))throw new TypeError("NaN is not a valid value");if(!h.arraylike(b))throw new TypeError("second argument must be array-like");for(var c=b.length;--c>=0;)if(a>b[c])return!1;return!0},h.nan=function(a){return!h.number(a)||a!==a},h.even=function(a){return h.infinite(a)||h.number(a)&&a===a&&a%2===0},h.odd=function(a){return h.infinite(a)||h.number(a)&&a===a&&a%2!==0},h.ge=function(a,b){if(f(a)||f(b))throw new TypeError("NaN is not a valid value");return!h.infinite(a)&&!h.infinite(b)&&a>=b},h.gt=function(a,b){if(f(a)||f(b))throw new TypeError("NaN is not a valid value");return!h.infinite(a)&&!h.infinite(b)&&a>b},h.le=function(a,b){if(f(a)||f(b))throw new TypeError("NaN is not a valid value");return!h.infinite(a)&&!h.infinite(b)&&b>=a},h.lt=function(a,b){if(f(a)||f(b))throw new TypeError("NaN is not a valid value");return!h.infinite(a)&&!h.infinite(b)&&b>a},h.within=function(a,b,c){if(f(a)||f(b)||f(c))throw new TypeError("NaN is not a valid value");if(!h.number(a)||!h.number(b)||!h.number(c))throw new TypeError("all arguments must be numbers");var d=h.infinite(a)||h.infinite(b)||h.infinite(c);return d||a>=b&&c>=a},h.object=function(a){return a&&"[object Object]"===e.call(a)},h.hash=function(a){return h.object(a)&&a.constructor===Object&&!a.nodeType&&!a.setInterval},h.regexp=function(a){return"[object RegExp]"===e.call(a)},h.string=function(a){return"[object String]"===e.call(a)}},{}],4:[function(a,b,c){"use strict";c.M_per_LY=94605284e8,c.M_per_AU=149597870700},{}],5:[function(a,b,c){"use strict";c.Const=a("./Const.js"),c.Utils=a("./Utils.js"),c.SDD=a("./SDD.js"),c.map=a("./map.js"),c.Utils.isBrowser&&(c.IGB=a("./IGB.js")),c.V_MAJOR=0,c.V_MINOR=2,c.V_PATCH=0,c.VERSION=c.V_MAJOR+"."+c.V_MINOR+"."+c.V_PATCH},{"./Const.js":4,"./IGB.js":6,"./SDD.js":11,"./Utils.js":12,"./map.js":15}],6:[function(){"use strict";function a(a){var c,d,e,f,g,h=!1;g=b(this).attr("href"),g.match(/^eve:/i)&&(a.preventDefault(),g.match(/^eve:trust:/i)&&(h=!0),g=g.replace(/^eve:\s*/i,"").replace(/^trust:\s*/i,""),"undefined"!=typeof CCPEVE&&(c=b(this).data("igb-corpid"),d=b(this).data("igb-chan"),e=b(this).data("igb-cctype"),f=b(this).data("igb-trustme"),c&&c>0&&CCPEVE.showInfo(2,c),d&&CCPEVE.joinChannel(d),e&&CCPEVE.createContract(e),f&&CCPEVE.requestTrust(f)))}var b=jQuery;b(function(){b("a[href^='eve:']").click(a)})},{}],7:[function(a,b,c){"use strict";var d=c.P={};c.D={tables:{},version:null,verdesc:null,schema:null},d.LoadMeta=function(){return null},d.HasTable=function(a){return this.tables.hasOwnProperty(a)},d.GetTables=function(){var a,b=[];for(a in this.tables)this.tables.hasOwnProperty(a)&&b.push(a);return b},d.GetTable=function(a){return a&&this.tables.hasOwnProperty(a)?this.tables[a]:null}},{}],8:[function(a,b){"use strict";var c=a("./Utils"),d=a;b.exports=c.isBrowser?a("./SDD.Source.json_browser.js"):d("./SDD.Source.json_node.js")},{"./SDD.Source.json_browser.js":9,"./Utils":12}],9:[function(a,b,c){"use strict";function d(a,b,c,d,e){var f,g,h;if(!a)return d.reject({context:e,source:this,status:"error",error:"invalid data object"});if(!a.hasOwnProperty("formatID")||"1"!=a.formatID)return d.reject({context:e,source:this,status:"error",error:"unknown data format"});if(!a.hasOwnProperty("schema")||!a.hasOwnProperty("version"))return d.reject({context:e,source:this,status:"error",error:"data has no version information"});if(!a.hasOwnProperty("tables")||!a.hasOwnProperty("tables"))return d.reject({context:e,source:this,status:"error",error:"data has no table information"});this.version=a.version,this.schema=a.schema,a.hasOwnProperty("verdesc")&&(this.verdesc=a.verdesc),this.tables={},this.jsonfiles={};for(f in a.tables)if(a.tables.hasOwnProperty(f))for(g=j.Create(f,this,a.tables[f]),this.tables[g.name]=g,h=0;h<g.segments.length;h++)this.jsonfiles.hasOwnProperty(g.segments[h].tag)||(this.jsonfiles[g.segments[h].tag]={loaded:!1,p:null});d.resolve({context:e,source:this})}function e(a,b,c,d,e){d.reject({context:e,source:this,status:b,error:c})}function f(a,b,c){c&&c.hasOwnProperty("tables")?c.hasOwnProperty("formatID")&&"1"==c.formatID?(this.jsonfiles[b].loaded=!0,this.jsonfiles[b].data=c,this.jsonfiles[b].p.resolve({context:a,tag:b,data:c})):this.jsonfiles[b].p.reject({context:a,tag:b,status:"error",error:"unknown data format"}):this.jsonfiles[b].p.reject({context:a,tag:b,status:"error",error:"invalid data object"})}function g(a,b,c,d){this.jsonfiles[b].p.reject({context:a,tag:b,status:c,error:d})}var h=a("node.extend"),i=a("./SDD.Source.js"),j=a("./SDD.Table.js"),k=a("./Utils.js"),l=c.P=k.create(i.P);c.D=h(!0,{},i.D,{cfg:{cache:!0,datatype:"json",timeout:0},jsonfiles:{}}),c.Create=function(a){var b=k.create(l);return h(!0,b,c.D),b.Config(a),b},l.Config=function(a){h(this.cfg,a)},l.LoadMeta=function(a){var b=this,c=k.deferred();return this.cfg.hasOwnProperty("path")&&"string"==typeof this.cfg.path?"json"!=this.cfg.datatype&&"jsonp"!=this.cfg.datatype?c.reject({context:a,source:this,status:"error",error:"invalid datatype: "+this.cfg.datatype}).promise:(k.ajax({dataType:this.cfg.datatype,cache:this.cfg.cache,jsonp:!1,timeout:this.cfg.timeout,jsonpCallback:"EVEoj_metainf_callback",url:this.cfg.path+"/metainf."+this.cfg.datatype}).then(function(e,f,g){d.apply(b,[e,f,g,c,a])},function(d,f,g){e.apply(b,[d,f,g,c,a])}),c.promise):c.reject({context:a,source:this,status:"error",error:"path is required"}).promise},l.LoadTag=function(a,b){var c=this;return this.jsonfiles[a].loaded?k.deferred().resolve({tag:a,data:this.jsonfiles[a].data}).promise:null!==this.jsonfiles[a].p?this.jsonfiles[a].p.promise:(this.jsonfiles[a].p=k.deferred(),k.ajax({dataType:this.cfg.datatype,cache:this.cfg.cache,jsonp:!1,timeout:this.cfg.timeout,jsonpCallback:"EVEoj_"+a+"_callback",url:this.cfg.path+"/"+a+"."+this.cfg.datatype}).then(function(d){f.apply(c,[b,a,d])},function(d,e,f){g.apply(c,[b,a,e,f])}),this.jsonfiles[a].p.promise)}},{"./SDD.Source.js":7,"./SDD.Table.js":10,"./Utils.js":12,"node.extend":1}],10:[function(a,b,c){"use strict";function d(a,b){var c,e;for(c in a){if(!a.hasOwnProperty(c))return;if(!a[c])return;if(b.push(parseInt(c,10)),a[c]instanceof Array)for(e=b.length-1;e>=0;e--)a[c].unshift(b[e]);else d(a[c],b);b.pop()}}function e(a,b,c,e,f,h){var i;for(c.has++,i=0;i<this.segments.length;i++)if(this.segments[i].tag==a){b.tables.hasOwnProperty(this.name)&&b.tables[this.name].hasOwnProperty("d")&&(b.tables[this.name].hasOwnProperty("U")||(d(b.tables[this.name].d,[]),b.tables[this.name].U=!0),g(this.data,b.tables[this.name].d),b.tables[this.name].hasOwnProperty("L")?this.loaded+=b.tables[this.name].L:1==c.needs&&(this.loaded=this.length),this.segments[i].loaded=!0);break}null!==h&&h({context:f,table:this,has:c.has,needs:c.needs}),c.has>=c.needs&&e.resolve({context:f,table:this})}function f(a,b,c,d,e){d.reject({context:e,table:this,status:b,error:c})}var g=a("node.extend"),h=a("./Utils.js"),i=c.P={};c.D={src:null,name:null,keyname:null,columns:[],colmap:{},c:null,colmeta:{},subkeys:[],data:{},segments:[],length:0,loaded:0},c.Create=function(a,b,d){var e,f,j;if(e=h.create(i),g(!0,e,c.D),e.src=b,e.name=a,d.hasOwnProperty("j"))e.segments.push({min:0,max:-1,tag:d.j,loaded:!1,p:null});else if(d.hasOwnProperty("s"))for(f=0;f<d.s.length;f++)e.segments.push({min:d.s[f][1],max:d.s[f][2],tag:a+"_"+d.s[f][0],loaded:!1,p:null});if(d.hasOwnProperty("k"))for(j=d.k.split(":"),e.keyname=j.shift(),f=0;f<j.length;f++)e.subkeys.push(j[f]);for(e.columns.push(e.keyname?e.keyname:"index"),f=0;f<e.subkeys.length;f++)e.columns.push(e.subkeys[f]);if(d.hasOwnProperty("c"))for(f=0;f<d.c.length;f++)e.columns.push(d.c[f]);for(f=0;f<e.columns.length;f++)e.colmap[e.columns[f]]=f;return e.colmap.index=0,e.c=e.colmap,d.hasOwnProperty("m")&&g(!0,e.colmeta,d.m),d.hasOwnProperty("l")&&(e.length=d.l),e},i.GetEntry=function(a){var b,c,d;if(c=parseInt(a,10),isNaN(c))return null;if(d=c.toString(10),this.data.hasOwnProperty(d))return this.data[d];for(b=0;b<this.segments.length;b++)if(c>=this.segments[b].min&&(c<=this.segments[b].max||-1==this.segments[b].max))return this.segments[b].loaded?null:!1;return null},i.GetValue=function(a,b){var c;if(c=a instanceof Array?a:this.GetEntry(a),null===c||c===!1)return c;if(isNaN(b)){if(!this.colmap.hasOwnProperty(b))return null;b=this.colmap[b]}return c[b]},i.Load=function(a){var b,c,d,i,j,k,l,m,n=h.deferred(),o=this,p={context:null,key:null,progress:null};if(g(p,a),null===p.key){for(b=[],j=0;j<this.segments.length;j++)this.segments[j].loaded||b.push(j);if(c={needs:b.length,has:0},b.length>0){for(l=function(a){e.apply(o,[a.tag,a.data,c,n,p.context,p.progress])},m=function(a){f.apply(o,[a.tag,a.status,a.error,n,p.context])},j=0;j<b.length;j++)k=this.segments[b[j]],k.p||(k.p=this.src.LoadTag(k.tag)),k.p.then(l,m);return n.promise}return n.resolve({context:p.context,table:this}),n.promise}if(d=parseInt(p.key,10),isNaN(d))return n.reject({context:p.context,table:this,status:"badkey",error:"invalid key; not numeric"}),this.p.promise;for(i=d.toString(10),k=-1,j=0;j<this.segments.length;j++)if(d>=this.segments[j].min&&(d<=this.segments[j].max||-1==this.segments[j].max)){k=this.segments[j];break}return-1===k?n.reject({context:p.context,table:this,status:"badkey",error:"invalid key; no segment contains it"}).promise:k.loaded?n.resolve({context:p.context,table:this}).promise:(null===k.p&&(k.p=this.src.LoadTag(k.tag)),c={needs:1,has:0},k.p.then(function(a){e.apply(o,[a.tag,a.data,c,n,p.context,p.progress])},function(a){f.apply(o,[a.tag,a.status,a.error,n,p.context])}),n.promise)},i.ColIter=function(a){var b;return this.colmap.hasOwnProperty(a)?(b=this.colmap[a],function(a){return a[b]}):function(){return void 0}},i.ColPred=function(a,b,c){var d;return this.colmap.hasOwnProperty(a)?(d=this.colmap[a],"=="==b||"eq"==b?function(a){return a[d]==c}:"!="==b||"ne"==b?function(a){return a[d]!=c}:"==="==b||"seq"==b?function(a){return a[d]===c}:"!=="==b||"sne"==b?function(a){return a[d]!==c}:">"==b||"gt"==b?function(a){return a[d]>c}:">="==b||"gte"==b?function(a){return a[d]>=c}:"<"==b||"lt"==b?function(a){return a[d]<c}:"<="==b||"lte"==b?function(a){return a[d]<c}:void 0):function(){return!1}}},{"./Utils.js":12,"node.extend":1}],11:[function(a,b,c){"use strict";c.Source=a("./SDD.Source.js"),c.Source.json=a("./SDD.Source.json.js"),c.Table=a("./SDD.Table.js"),c.Create=function(a,b){return"undefined"==typeof c.Source[a]||"function"!=typeof c.Source[a].Create?null:c.Source[a].Create(b)}},{"./SDD.Source.js":7,"./SDD.Source.json.js":8,"./SDD.Table.js":10}],12:[function(a,b,c){"use strict";c.isBrowser="undefined"!=typeof window;var d,e=a,f=function(){};c.create="function"==typeof Object.create?Object.create:function(a){if(arguments.length>1)throw Error("Second argument not supported");if(null===a)throw Error("Cannot set a null [[Prototype]]");if("object"!=typeof a)throw TypeError("Argument must be an object");return f.prototype=a,new f},c.isBrowser?(c.deferred=Promise.defer,c.ajax=jQuery.ajax):(d=e("bluebird"),c.deferred=d.defer),c.FormatNum=function(a,b){var c,d=[],e=String(Math.floor(a)),f=-1,g=0;for(b=b||0,g=e.length-1;g>=0;g--)f%3===0?(f=1,d.push(",")):-1==f?f=1:f++,d.push(e.charAt(g));for(e="",g=d.length-1;g>=0;g--)e=e.concat(d[g]);return b>0&&(c=a.toFixed(b),e+=c.substring(c.length-b-1)),e}},{}],13:[function(a,b,c){"use strict";var d=a("node.extend"),e=a("./Utils.js"),f=c.P={};c.D={ID:null,name:null,regionID:null,constellationID:null,pos:{x:null,y:null,z:null},posMax:{x:null,y:null,z:null},posMin:{x:null,y:null,z:null},luminosity:null,border:null,fringe:null,corridor:null,hub:null,international:null,regional:null,constellation:null,contiguous:null,security:null,sec:null,factionID:null,radius:null,sunTypeID:null,securityClass:null,wormholeClassID:null,stationCount:null},c.Create=function(a,b){var g,h,i,j;return j=parseInt(b,10),(h=a.GetEntry(j))?(g=e.create(f),d(!0,g,c.D),i=a.colmap,g.ID=j,g.name=h[i.solarSystemName],g.regionID=h[i.regionId],g.constellationID=h[i.constellationID],g.pos={x:h[i.x],y:h[i.y],z:h[i.z]},g.posMin={x:h[i.xMin],y:h[i.yMin],z:h[i.zMin]},g.posMax={x:h[i.xMax],y:h[i.yMax],z:h[i.zMax]},g.luminosity=h[i.luminosity],g.border=h[i.border],g.fringe=h[i.fringe],g.corridor=h[i.corridor],g.hub=h[i.hub],g.international=h[i.international],g.regional=h[i.regional],g.constellation=h[i.constellation],g.contiguous=h[i.contiguous],g.security=h[i.security],g.sec=g.security>0?g.security.toFixed(1):"0.0",g.factionID=0!==h[i.factionID]?h[i.factionID]:null,g.radius=h[i.radius],g.sunTypeID=h[i.sunTypeID],g.securityClass=h[i.securityClass],g.wormholeClassID=h[i.wormholeClassID],g.stationCount=h[i.stationCount]?h[i.stationCount]:0,g):null}},{"./Utils.js":12,"node.extend":1}],14:[function(a,b,c){"use strict";var d=a("node.extend"),e=a("./Utils.js"),f=c.P={};c.D={curidx:0,map:null,keyset:[]},c.Create=function(a){var b,g,h;b=e.create(f),d(!0,b,c.D),b.map=a,h=a.tables["map"+a.space+"SolarSystems"].tbl;for(g in h.data)h.data.hasOwnProperty(g)&&b.keyset.push(g);return b},f.HasNext=function(){return this.curidx<this.keyset.length?!0:void 0},f.Next=function(){return this.map.GetSystem({id:this.keyset[this.curidx++]})}},{"./Utils.js":12,"node.extend":1}],15:[function(a,b,c){"use strict";function d(a,b){var c,d=0,e=0;for(c in this.tables)this.tables.hasOwnProperty(c)&&(e+=this.tables[c].tbl.segments.length,c==a.name&&(this.tables[c].done=!0),this.tables[c].done&&(d+=this.tables[c].tbl.segments.length));d>=e&&(g.apply(this),this.loadingP.resolve({context:b,map:this}))}function e(a,b,c,d){this.loadingP.reject({context:b,map:this,status:c,error:d})}function f(a,b){var c,d,e=0,f=0;if(null!==b){for(c in this.tables)if(this.tables.hasOwnProperty(c))for(f+=this.tables[c].tbl.segments.length,d=0;d<this.tables[c].tbl.segments.length;d++)this.tables[c].tbl.segments[d].loaded&&e++;b({context:a.context,map:this,has:e,needs:f})}}function g(){var a,b,c,d,e,f,g=this.tables["map"+this.space+"SolarSystems"].tbl,h=g.colmap;n={};for(a in g.data)if(g.data.hasOwnProperty(a)&&(c=g.data[a],this.sysNameMap[c[h.solarSystemName]]=parseInt(a,10),this.sysNames.push(c[h.solarSystemName]),d=!1,"W"!=this.space&&(d="map"+this.space+"SolarSystemJumps"),d&&this.tables.hasOwnProperty(d))){f={jumps:[],cont:c[h.contiguous],sec:c[h.security].toFixed(1),name:c[h.solarSystemName]},e=this.tables[d].tbl.data[a];for(b in e)e.hasOwnProperty(b)&&f.jumps.push(b);this.routeGraph[a]=f}this.sysNames.sort()}var h=a("node.extend"),i=a("./Const.js"),j=a("./Utils.js"),k=a("./map.System.js"),l=a("./map.SystemIter.js"),m=c.P={};c.D={src:null,tables:{},sysNameMap:{},sysNames:[],routeGraph:{},space:null,loaded:!1,loadingP:null,c:{jumps:!1,planets:!1,moons:!1,belts:!1,gates:!1,celestials:!1,statistics:!1,landmarks:!1}};var n=null;c.Create=function(a,b,d){if(!a||"function"!=typeof a.HasTable)return null;if("J"!=b&&"K"!=b&&"W"!=b)return null;var e=j.create(m);return h(!0,e,c.D),d&&h(!0,e.c,d),e.src=a,e.space=b,e},m.Load=function(a){var b,c,g,i=this,k=this.tables,l=null,m={context:null,progress:null};if(h(m,a),this.loaded)return j.deferred().resolve({context:m.context,map:this}).promise;if(this.loadingP)return this.loadingP.promise;this.loadingP=j.deferred(),k["map"+this.space+"Regions"]=!1,k["map"+this.space+"Constellations"]=!1,k["map"+this.space+"SolarSystems"]=!1,("K"==this.space||"J"==this.space)&&(k["map"+this.space+"SolarSystemJumps"]=!1,this.c.jumps&&(k.mapRegionJumps=!1,k.mapConstellationJumps=!1,k.mapJumps=!1),this.c.belts&&(k["map"+this.space+"Belts"]=!1),this.c.gates&&(k["map"+this.space+"Gates"]=!1),this.c.landmarks&&(k.mapLandmarks=!1)),this.c.planets&&(k["map"+this.space+"Planets"]=!1),this.c.moons&&(k["map"+this.space+"Moons"]=!1),this.c.celestials&&(k["map"+this.space+"Celestials"]=!1),this.c.statistics&&(k["map"+this.space+"CelestialStatistics"]=!1),c=function(a){d.apply(i,[a.table,a.context])},g=function(a){e.apply(i,[a.table,a.context,a.status,a.error])},null!==m.progress&&(l=function(a){f.apply(i,[a,m.progress])});for(b in k)if(k.hasOwnProperty(b)){if(k[b]={tbl:this.src.GetTable(b),done:!1},!k[b].tbl)return this.loadingP.reject({context:m.context,map:i,status:"error",error:"source does not contain requested table: "+b}).promise;k[b].tbl.Load({context:m.context,progress:l}).then(c,g)}return this.loadingP.promise},m.GetSystem=function(a){var b,c;if(!a)return null;if(a.hasOwnProperty("name")&&this.sysNameMap.hasOwnProperty(a.name))b=this.sysNameMap[a.name];else{if(!a.hasOwnProperty("id"))return null;b=parseInt(a.id,10)}return c=b.toString(10),n.hasOwnProperty(c)||(n[c]=k.Create(this.tables["map"+this.space+"SolarSystems"].tbl,b)),n[c]},m.GetSystems=function(){return l.Create(this)},m.JumpDist=function(a,b){var c,d=this.tables["map"+this.space+"SolarSystems"].tbl,e=d.colmap,f=d.data[a][e.x],g=d.data[b][e.x],h=d.data[a][e.y],j=d.data[b][e.y],k=d.data[a][e.z],l=d.data[b][e.z];return c=Math.sqrt(Math.pow(f-g,2)+Math.pow(h-j,2)+Math.pow(k-l,2)),c/i.M_per_LY},m.Route=function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t=[],u={},v=[];if(f=parseInt(a,10).toString(10),g=parseInt(b,10).toString(10),!this.routeGraph.hasOwnProperty(f)||!this.routeGraph.hasOwnProperty(g))return t;for(h in this.routeGraph)this.routeGraph.hasOwnProperty(h)&&(this.routeGraph[h].td=-1,this.routeGraph[h].prevID=-1,this.routeGraph[h].visited=!1);if(c&&c.length>0)for(o=0;o<c.length;o++)u[c[o]]=!0;if(f===g)return t;for(p=f,f=g,g=p,i=f,this.routeGraph[f].td=0;!this.routeGraph[g].visited;){if(i!=f){for(q=-1,r=-1,o=0;o<v.length;o++)j=v[o],this.routeGraph[j].visited||u[j]||(m=this.routeGraph[j].td,m>0&&(-1==q||q>m)&&(i=j,q=m,r=o));if(-1==q)return t;v.splice(r,1)}for(o=0;o<this.routeGraph[i].jumps.length;o++)k=this.routeGraph[i].jumps[o],s=1,d&&this.routeGraph[k].sec<.5&&(s=1e3),e&&this.routeGraph[k].sec>=.5&&(s=1e3),n=this.routeGraph[i].td+s,(this.routeGraph[k].td<0||this.routeGraph[k].td>n)&&(this.routeGraph[k].td=n,this.routeGraph[k].prevID=i,v.push(k));this.routeGraph[i].visited=!0,i=0}for(l=this.routeGraph[g].prevID;l!=f;)t.push(parseInt(l,10)),l=this.routeGraph[l].prevID;return t.push(parseInt(f,10)),t}},{"./Const.js":4,"./Utils.js":12,"./map.System.js":13,"./map.SystemIter.js":14,"node.extend":1}]},{},[5])(5)});